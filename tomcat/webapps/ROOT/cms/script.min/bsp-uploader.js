!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t(e.$,e)}(this,function(e,t){return{_defaultOptions:{path:"/_upload"},init:function(t,n){var a=this;a.settings=e.extend({},a._defaultOptions,n),a.el=e(t),a.isMultiple=a.el.attr("multiple")?!0:!1,e(a.el).on("change",function(e){0!==this.files.length&&a.upload(this)})},_attachEventHandlers:function(e,t,n,a){var r=this;e.upload.addEventListener("progress",function(e,t){return function(n){e.progress(n,t)}}(r,a),!1),e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&(r.afterEach(e,t,a),n.resolve())}},upload:function(){var t=this,n=t.el,a=n.attr("name");t.files=n.prop("files"),t.before(),t.requests=[],t.requestsData=[],t.deferreds=[],e.each(t.files,function(n,r){var s,f;s=new XMLHttpRequest,f=new FormData,f.append("fileParameter",a),f.append(a,r),t.requests.push(s),t.requestsData.push(f),t.deferreds.push(e.Deferred()),t._attachEventHandlers(s,r,t.deferreds[n],n),t.beforeEach(s,r,n),s.open("POST",t.settings.path),s.send(f)}),e.when.apply(null,t.deferreds).done(function(){t.after()})},before:function(){},beforeEach:function(e,t,n){},progress:function(e){},afterEach:function(e,t,n){},after:function(){}}});