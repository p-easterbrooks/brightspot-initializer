define(["jquery","bsp-utils"],function(n,t){function e(n){i.setItem(c+n,+new Date)}function o(t){i.removeItem(c+t),n.ajax({url:CONTEXT_PATH+"/contentUnlock",data:{id:t},async:!1,cache:!1})}n(window).load(function(){t.onDomInsert(document,'.contentLock[data-content-locked-out = "true"] :input',{insert:function(t){n(t).trigger("input-disable",[!0])}})});var c="cms.contentLock.",i=window.localStorage;return setInterval(function(){var n,t,e,a=i.length,r=+new Date,u=[];for(n=0;a>n;++n)t=i.key(n),t&&0===t.indexOf(c,0)&&parseInt(i.getItem(t),10)+5e3<r&&(e=t.substring(c.length),u.push(e));for(a=u.length,n=0;a>n;++n)o(u[n])},1e3),window.bspContentLock=e,window.bspContentUnlcok=o,{lock:e,unlock:o}});