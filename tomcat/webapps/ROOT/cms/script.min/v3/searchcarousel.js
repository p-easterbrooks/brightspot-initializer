define(["jquery","bsp-utils","v3/input/carousel"],function(e,t,a){var r={containerSelector:".widget-searchCarousel",nextAttr:"next-page",prevAttr:"prev-page",itemsSelector:"a"};t.onDomInsert(document,r.containerSelector,{insert:function(t){function n(t,a){var r=e(t);a&&(r=r.get().reverse()),e.each(r,function(t,r){var n,i=e(r);a?c.prependTile(i):c.addTile(i),i.is(".widget-searchCarousel-item-selected")&&(n=i.closest(".carousel-tile").index()+1||0,c.setActive(n))})}var c,i=e(t);c=Object.create(a),c.init(i,{numbered:!1}),n(i.children(r.itemsSelector),!1),c.update(),c.goToActiveTile(),i.on("carousel.end carousel.begin",function(t,a){var c="end"===t.namespace,o=c?r.nextAttr:r.prevAttr,d=i.data(o);d&&e.ajax({method:"get",url:i.data(o),cache:!1}).done(function(t){var d=e(t),s=d.data(o);i.data(o,s).attr("data-"+o,s),n(d.children(r.itemsSelector),!c),a.carousel.update()})})}})});