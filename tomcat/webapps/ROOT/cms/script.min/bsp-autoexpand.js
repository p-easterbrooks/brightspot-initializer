!function(t,e){"function"==typeof define&&define.amd?define(["jquery","bsp-utils"],e):e(t.jQuery,t.bsp_utils,t)}(this,function(t,e,i){var n,a="shadow",o=t(document);return e.plugin(i,"bsp","autoExpand",{_install:function(){var i=this;i._on(window,"resize",e.throttle(200,function(){i.expand(t.makeArray(o.find("."+i._itemClassName+":visible")))}))},_init:function(t,e){var i=this;i._on(t,"change input",e,function(){i.expand(this)})},_each:function(e){if(!this._data(e,a)){var i=t(e);if(i.is(":visible")){var n,o,s,l=i.css("display"),d=t("<div/>");if(window.getComputedStyle){n=window.getComputedStyle(e,null);for(var h=0,c=n.length;c>h;++h)o=n.item(h),s=n.getPropertyValue(o),d[0].style.setProperty(o,s)}else{n=e.currentStyle;for(o in n)d[0].style[o]=n[o]}d.css({height:"auto","white-space":"pre-wrap",width:"auto"}),this._data(e,a,{display:l,$input:i,$element:d})}}},_all:function(e,i){var o=this,s=t(e);n||(n=t("<div/>",{"class":o._classNamePrefix+"shadows",css:{left:-1e4,position:"absolute",top:0,visibility:"hidden"}}),t(document.body).append(n)),s.each(function(){var t=o._data(this,a);t&&!t.elementAppended&&(n.append(t.$element),t.elementAppended=!0)}),i||o.expand(e)},expand:function(e){var i=this,n=t(e),o=[];return n.each(function(){i._each(this)}),i._all(e,!0),n.each(function(){var t=i._data(this,a);t&&o.push(t)}),t.each(o,function(t,e){var i=e.$input[0].getBoundingClientRect();e.width=i.right-i.left,e.height=i.bottom-i.top}),t.each(o,function(t,e){var i=e.$input,n=i.val(),a="block"===e.display?" foo foo foo":" foo";e.$element.text(n?n+a:i.prop("placeholder")||a)}),t.each(o,function(t,e){"block"===e.display&&e.$element.css("width",e.width)}),t.each(o,function(t,e){var i=e.$element[0].getBoundingClientRect();"block"===e.display?e.height=i.bottom-i.top:e.width=i.right-i.left}),t.each(o,function(t,e){var i=e.$input;i.css("overflow","hidden"),"block"===e.display?i.css("height",e.height):i.css("width",e.width)}),n}})});