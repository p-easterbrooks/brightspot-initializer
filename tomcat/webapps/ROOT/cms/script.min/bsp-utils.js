!function(t,n){"function"==typeof define&&define.amd?define(["jquery"],n):t.bsp_utils=n(t.jQuery)}(this,function(t){var n={};return function(){n.throttle=function(n,e){if(0>=n)return e;var a,o,r=0;return function(){if(o=arguments,!a){var i=this,s=+t.now(),f=n-s+r;0>=f?(r=s,e.apply(i,o)):a=setTimeout(function(){r=s,a=null,e.apply(i,o)},f)}}}}(),function(){function e(n){var e=n.insertedClassName,a=n.$roots.find(n.selector).filter(":not(."+e+")");if(a.length>0){a.addClass(e);var o=n.callbacks,r=o.beforeInsert,i=o.insert,s=o.afterInsert;r&&r(t.makeArray(a)),i&&a.each(function(){i(this)}),s&&s(t.makeArray(a))}}function a(){t.each(o,function(t,n){e(n)})}var o=[],r="bsp-onDomInsert-inserted-",i=0;n.onDomInsert=function(n,a,s){var f=r+i;++i;var u={$roots:t(n),insertedClassName:f,selector:a,callbacks:s};t(document).ready(function(){e(u)}),o.push(u)};var s=window.MutationObserver||window.WebKitMutationObserver;t(document).ready(function(){s?new s(n.throttle(1,a)).observe(document,{childList:!0,subtree:!0}):setInterval(a,1e3/60)})}(),function(){var e=/\S+/g,a="_options",o=t(document);n.plugin=function(r,i,s,f){function u(n){return t.map(n.match(e),function(t){return t+"."+l._name}).join(" ")}function c(n,e){var o=n.attr(l._optionsAttrName);l._data(n[0],a,o?t.extend(!0,{},e,t.parseJSON(o)):e)}var l=f||{};return l._name=i+"_"+s,l._classNamePrefix=i+"-"+s+"-",l._rootClassName=l._classNamePrefix+"root",l._itemClassName=l._classNamePrefix+"item",l._on=function(n,e,a,o,r){var i=t(n);e=u(e),r?i.on(e,a,o,r):o?i.on(e,a,o):i.on(e,a)},l._off=function(n,e,a){var o=t(n);a?o.off(u(e),a):e?o.off(u(e)):o.off("."+l._name)},l._dataKeyPrefix=i+"-"+s+"-",l._data=function(n,e,a){var o=t(n);return 0===o.length?null:(e=l._dataKeyPrefix+e,void 0===a?t.data(o[0],e):o.each(function(){t.data(this,e,a)}))},l.option=function(n,e,o){var r=this;return"undefined"==typeof e?r._data(n,a)||{}:"undefined"==typeof o?(r._data(n,a)||{})[e]:(t(n).each(function(){var t=r._data(this,a);t||(t={},r._data(this,a,t)),t[e]=o}),null)},l._attrName="data-"+i+"-"+s,l._attrNamePrefix=l._attrName+"-",l._optionsAttrName=l._attrNamePrefix+"options",l.live=function(e,a,o){var r=t(e);if(0!==r.length){r.each(function(){var n=t(9===this.nodeType?this.documentElement:this);n.addClass(l._rootClassName),c(n,t.extend(!0,{},l._defaultOptions,o))});var i=l._init,s=l._each,f=l._all;i&&i.call(l,t.makeArray(r),a),(s||f)&&a&&n.onDomInsert(t.makeArray(r),a,{insert:function(n){var e=t(n),a=l.option(e.closest("."+l._rootClassName));e.addClass(l._itemClassName),c(e,a),s&&s.call(l,n)},afterInsert:f?function(t){f.call(l,t)}:t.noop})}},l.init=function(t,n){l.live(t,null,n)},l._install&&l._install(),o.ready(function(){l.live(document,"["+l._attrName+"]")}),r&&(r[l._name]=l),l}}(),n});